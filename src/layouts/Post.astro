---
import type { CollectionEntry } from "astro:content"
import FormattedDate from "../components/FormattedDate.astro"
import Base from "./Base.astro"
import TableOfContents from "../components/TableOfContents.astro"
import type { MarkdownHeading } from "astro"

type BlogProps = CollectionEntry<"blog">
type TILProps = CollectionEntry<"til">
type ShareProps = CollectionEntry<"share">
type Props = (BlogProps | TILProps | ShareProps) & { headings: MarkdownHeading[] }

const { data, headings } = Astro.props
const { title, date, description } = data
---

<Base title={title} description={description ?? ""}>
  <article class="prose max-w-none">
    <h1 id="title" class="text-3xl mb-1">{title}</h1>
    <FormattedDate class="text-lg" date={date} />
    <hr class="my-8" />
    <slot />
  </article>

  {headings.length > 0 && <TableOfContents headings={headings} slot="toc" />}
</Base>
